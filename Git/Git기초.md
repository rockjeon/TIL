## Git  기초

> 출처:  [https://git-scm.com/book/en/v2](https://git-scm.com/book/en/v2)
>
> 실습하기 좋은 사이트 :[http://bit.ly/2NzKcRa]([http://bit.ly/2NzKcRa](https://bit.ly/2NzKcRa?fbclid=IwAR21IFrLmRlXOgtZ1jGE2RnM4ldyhv2kswneYnVCyI5lKJzzMojff27VaIM))



**각 파일에 대한 변화를 저장하는 시스템**

Git은 이런 식으로 데이터를 저장하지도 취급하지도 않는다. 대신 Git은 데이터를 파일 시스템 스냅샷의 연속으로 취급하고 크기가 아주 작다. Git은 커밋하거나 프로젝트의 상태를 저장할 때마다 파일이 존재하는 그 순간을 중요하게 여긴다. 파일이 달라지지 않았으면 Git은 성능을 위해서 파일을 새로 저장하지 않는다. 단지 이전 상태의 파일에 대한 링크만 저장한다. Git은 데이터를 **스냅샷의 스트림**처럼 취급한다.

**세가지 상태**

Git은 파일을 *Committed*, *Modified*, *Staged* 이렇게 세 가지 상태로 관리한다.

- Committed란 데이터가 로컬 데이터베이스에 안전하게 저장됐다는 것을 의미한다.
- Modified는 수정한 파일을 아직 로컬 데이터베이스에 커밋하지 않은 것을 말한다.
- Staged란 현재 수정한 파일을 곧 커밋할 것이라고 표시한 상태를 의미한다.

**워킹 트리, Staging Area, Git 디렉토리**

Git 디렉토리는 Git이 프로젝트의 메타데이터와 객체 데이터베이스를 저장하는 곳을 말한다. 이 Git 디렉토리가 Git의 핵심이다. 다른 컴퓨터에 있는 저장소를 *Clone* 할 때 Git 디렉토리가 만들어진다.

워킹 트리는 프로젝트의 특정 버전을 Checkout 한 것이다. Git 디렉토리는 지금 작업하는 디스크에 있고 그 디렉토리 안에 압축된 데이터베이스에서 파일을 가져와서 워킹 트리를 만든다.

Staging Area는 Git 디렉토리에 있다. 단순한 파일이고 곧 커밋할 파일에 대한 정보를 저장한다. Git에서는 기술용어로는 “Index” 라고 하지만, “Staging Area” 라는 용어를 써도 상관 없다.

Git으로 하는 일은 기본적으로 아래와 같다.

1. 워킹 트리에서 파일을 수정한다.
2. Staging Area에 파일을 Stage 해서 커밋할 스냅샷을 만든다. 모든 파일을 추가할 수도 있고 선택하여 추가할 수도 있다.
3. Staging Area에 있는 파일들을 커밋해서 Git 디렉토리에 영구적인 스냅샷으로 저장한다.

Git 디렉토리에 있는 파일들은 Committed 상태이다. 파일을 수정하고 Staging Area에 추가했다면 Staged이다. 그리고 Checkout 하고 나서 수정했지만, 아직 Staging Area에 추가하지 않았으면 Modified이다. 



**Git 저장소 만들기**

* 그냥 디렉토리 만들어서 파일 `git add`해서 할 수 있음
* `git clone` 할수도 있음.

**Git 수정/저장**

> 파일의 상태 알기 / 파일이 수정 되고 저장되는 법 이해하기

* Tracked(관리대상) vs Untracked(관리대상이 아님) 
  * Tracked 즉 "관리대상" 은 Modified (수정함) vs Unmodified(수정하지 않음) -> Git 이 알고 있다(?)

* `git status` (파일의 상태 파악) -> `git add`(staged 상태로 만들어준다) -> `git commit`  -> `git push`
*  `git diff`  : 단순히 파일이 변경됐다는 사실이 아니라 어떤 내용이 변경 됐는지 살펴 봄 
* `git log` :  새로 저장소를 만들어서 몇 번 커밋을 했을 수도 있고, 커밋 히스토리가 있는 저장소를 Clone 했을 수도 있다. 어쨌든 가끔 저장소의 히스토리를 보고 싶을 때 확인가능

**Git 되돌리기**

 Git을 사용하면 우리가 저지른 실수는 대부분 복구할 수 있지만 되돌린 것은 복구할 수 없다.

종종 완료한 커밋을 수정해야 할 때가 있다. 너무 일찍 커밋했거나 어떤 파일을 빼먹었을 때 그리고 커밋 메시지를 잘못 적었을 때 한다. 다시 커밋하고 싶으면 파일 수정 작업을 하고 Staging Area에 추가한 다음 `--amend` 옵션을 사용하여 커밋을 재작성 할 수 있다.

```console
$ git commit --amend
```

이 명령은 Staging Area를 사용하여 커밋한다. 만약 마지막으로 커밋하고 나서 수정한 것이 없다면(커밋하자마자 바로 이 명령을 실행하는 경우) 조금 전에 한 커밋과 모든 것이 같다. *커밋 메시지만 수정한다.*

편집기가 실행되면 이전 커밋 메시지가 자동으로 포함된다. 메시지를 수정하지 않고 그대로 커밋해도 기존의 커밋을 덮어쓴다.

커밋을 했는데 Stage 하는 것을 깜빡하고 빠트린 파일이 있으면 아래와 같이 고칠 수 있다.

```console
$ git commit -m 'initial commit'
$ git add forgotten_file
$ git commit --amend
```

여기서 실행한 명령어 3개는 모두 커밋 한 개로 기록된다.  이전의 커밋을 고쳐서 새 커밋으로 변경하는 것을 의미함. (파일 수정 및 복구는 생략)

**리모트 저장소 -remote**

리모트 저장소를 관리할 줄 알아야 다른 사람과 함께 일할 수 있다. 리모트 저장소는 인터넷이나 네트워크 어딘가에 있는 저장소를 말한다. 저장소는 여러 개가 있을 수 있는데 어떤 저장소는 읽고 쓰기 모두 할 수 있고 어떤 저장소는 읽기만 가능할 수 있다. 간단히 말해서 다른 사람들과 함께 일한다는 것은 리모트 저장소를 관리하면서 데이터를 거기에 Push 하고 Pull 하는 것이다. 리모트 저장소를 관리한다는 것은 저장소를 추가, 삭제하는 것뿐만 아니라 브랜치를 관리하고 추적할지 말지 등을 관리하는 것을 말한다. 이번에는 리모트 저장소를 관리하는 방법에 대해 설명한다.

* `git remote` 명령으로 현재 프로젝트 리모트 저장소 확인할 수 있다. 기본적으로 clone  하면  'origin' 이라는 저장소가 자동으로 등록됨
* **Pull** & **Fetch** & **push** 
  * `git fetch <remote>`  리모트 저장소에서 데이터를 가져옴/ 모든 브랜치를 로컬에서 접근 가능 Merge나 내용 살펴 볼 수 있음.
  * `git pull` 리모트 저장소 브랜치에서 데이터를 가져올 뿐 아니라 자동으로 Merge 가능 
  * `git push <remote 저장소 이름> <브랜치이름>`  ex) `git push origin master` 